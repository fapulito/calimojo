(function(c,b,a,d){c.widget("poker.main",{_create:function(){var g=this,j=g.options,i=g.element;i.attr("id","poker-main");c.each(j,function(k,l){g._setOption(k,l)});if(!("WebSocket" in b)){WEB_SOCKET_SWF_LOCATION="WebSocketMain.swf";a.write(['<script type="text/javascript" src="web-socket-js/swfobject.js"><\/script>','<script type="text/javascript" src="web-socket-js/web_socket.js"><\/script>'].join(""));var e=c("#modal-box");e.append(c("<div />").addClass("modal-mes").html("Your browser needs to be updated. Please download Mozilla Firefox."),c("<button />").addClass("modal-ok center").html("OK").click(function(){e.hide()})).show()}var f=new WebSocket(j.ws);f.onerror=function(k){g._recModal("Connection closed.")};f.onclose=function(k){g._recModal("Connection closed.")};f.onopen=function(k){f.send(JSON.stringify(["guest_login"]))};f.onmessage=function(k){var l=JSON.parse(k.data);g._msgHandler(l[0],l[1])};var h=c("<div />").attr("id","lobby-main").lobby();g._setOptions({wsock:f,lobbyMain:h});i.append(c("<div />").attr("id","table-ring"),c("<div />").attr("id","table-tour"),c("<div />").attr("id","table-fast"),c("<div />").attr("id","tour-lobby"),h);g._img_preload()},_img_preload:function(){c.each(["2","3","4","5","6","7","8","9","10","J","Q","K","A"],function(g,f){c.each(["c","d","h","s"],function(i,h){(new Image()).src="img/deck/"+f+h+".png"})});function e(f){c(f).each(function(){(new Image()).src=this})}e(["img/deck/Joker.png","img/deck/cb.png","img/wall.png","img/table.png","img/title_left.png","img/title_left_active.png","img/title_right.png","img/title_right_active.png","img/button.png","img/stand.png","img/chip-1.png","img/chip-5.png","img/chip-25.png","img/chip-50.png","img/chip-100.png","img/chip-500.png","img/chip-1000.png","img/chip-2500.png","img/chip-10000.png","img/chip-50000.png","img/chip-500000.png","img/chip-100000.png","img/chip-2500000.png"])},destroy:function(){this.element.remove();this._super("_destroy")},_recModal:function(g){var f=this,e=c("#modal-box");e.empty();e.append(c("<div />").addClass("modal-mes").html(g),c("<button />").addClass("modal-ok").html("Reconnect").click(function(){f.element.empty();f._create()}),c("<button />").addClass("modal-cancel").html("Cancel").click(function(){f.destroy()})).show()},watch_tour:function(e){this.options.wsock.send(JSON.stringify(["watch_tour",e]))},unwatch_tour:function(e){this.options.wsock.send(JSON.stringify(["unwatch_tour",e]))},table_chips:function(e){this.options.wsock.send(JSON.stringify(["table_chips",e]))},logout:function(){this.options.wsock.send(JSON.stringify(["logout"]))},login_info:function(){this.options.wsock.send(JSON.stringify(["login_info"]))},table_opts:function(e){this.options.wsock.send(JSON.stringify(["table_opts",e]))},pick_game:function(e){this.options.wsock.send(JSON.stringify(["pick_game",e]))},table_chat:function(e){this.options.wsock.send(JSON.stringify(["table_chat",e]))},join_channel:function(e){this.options.wsock.send(JSON.stringify(["join_channel",e]))},unjoin_channel:function(e){this.options.wsock.send(JSON.stringify(["unjoin_channel",e]))},write_channel:function(e){this.options.wsock.send(JSON.stringify(["write_channel",e]))},watch_table:function(e){this.options.wsock.send(JSON.stringify(["watch_table",e]))},unwatch_table:function(e){this.options.wsock.send(JSON.stringify(["unwatch_table",e]))},join_ring:function(f){var e=JSON.stringify(["join_ring",f]);this.options.wsock.send(e)},unjoin_ring:function(f){var e=JSON.stringify(["unjoin_ring",f]);this.options.wsock.send(e)},login:function(e){var f=JSON.stringify(["login",e]);this.options.wsock.send(f)},register:function(e){var f=JSON.stringify(["register",e]);this.options.wsock.send(f)},bet:function(e){var f=JSON.stringify(["bet",e]);this.options.wsock.send(f)},check:function(e){var f=JSON.stringify(["check",e]);this.options.wsock.send(f)},fold:function(e){var f=JSON.stringify(["fold",e]);this.options.wsock.send(f)},discard:function(e){var f=JSON.stringify(["discard",e]);this.options.wsock.send(f)},draw:function(e){var f=JSON.stringify(["draw",e]);this.options.wsock.send(f)},reload:function(e){var f=JSON.stringify(["reload"]);this.options.wsock.send(f)},_msgHandler:function(h,g){var f=this,j=f.options,i=f.element;var e={join_channel_res:function(k){j.lobbyMain.lobby("join_channel_res",k)},unjoin_channel_res:function(k){j.lobbyMain.lobby("unjoin_channel_res",k)},table_snap:function(k){i.find("#tring"+k.table_id).table_ring("table_snap",k)},table_update:function(k){i.find("#tring"+k.table_id).table_ring("table_update",k)},guest_login:function(k){j.login_id=k.login_id;j.lobbyMain.lobby("guest_login",k)},login_snap:function(k){c.each(k,function(l,m){f._msgHandler("notify_login",m)})},ring_snap:function(k){j.lobbyMain.lobby("ring_snap",k)},tour_snap:function(k){j.lobbyMain.lobby("tour_snap",k)},message_snap:function(k){c.each(k,function(l,m){f._msgHandler("notify_message",m)})},notify_message:function(k){if(k.tour_id){}else{if(k.table_id){i.find("#tring"+k.table_id).table_ring("notify_message",k)}else{j.lobbyMain.lobby("notify_message",k)}}},player_update:function(k){i.find("#tring"+k.table_id).table_ring("player_update",k)},player_snap:function(k){if(k.length){var m=k[0].table_id;var l=i.find("#tring"+m);c.each(k,function(n,o){l.table_ring("notify_join_table",o)});l.table_ring("player_snap",k)}},move_button:function(k){i.find("#tring"+k.table_id).table_ring("move_button",k)},new_game:function(k){i.find("#tring"+k.table_id).table_ring("new_game",k)},end_game:function(k){i.find("#tring"+k.table_id).table_ring("end_game",k)},notify_post:function(k){i.find("#tring"+k.table_id).table_ring("notify_post",k)},deal_hole:function(k){i.find("#tring"+k.table_id).table_ring("deal_hole",k)},begin_new_round:function(k){i.find("#tring"+k.table_id).table_ring("begin_new_round",k)},begin_new_action:function(k){i.find("#tring"+k.table_id).table_ring("begin_new_action",k)},your_turn:function(k){i.find("#tring"+k.table_id).table_ring("your_turn",k)},deal_community:function(k){i.find("#tring"+k.table_id).table_ring("deal_community",k)},showdown:function(k){i.find("#tring"+k.table_id).table_ring("showdown",k)},high_winner:function(k){i.find("#tring"+k.table_id).table_ring("high_winner",k)},low_winner:function(k){i.find("#tring"+k.table_id).table_ring("low_winner",k)},notify_login:function(k){j.lobbyMain.lobby("notify_login",k)},notify_lr_update:function(k){j.lobbyMain.lobby("notify_lr_update",k)},notify_lt_update:function(k){j.lobbyMain.lobby("notify_lt_update",k)},login_update:function(k){j.lobbyMain.lobby("login_update",k)},notify_logout:function(k){j.lobbyMain.lobby("notify_logout",k)},notify_create_ring:function(k){j.lobbyMain.lobby("notify_create_ring",k)},notify_destroy_ring:function(k){j.lobbyMain.lobby("notify_destroy_ring",k)},tour_update:function(k){i.find("#tour"+k.tour_id).tour("tour_update",k)},notify_create_tour:function(k){j.lobbyMain.lobby("notify_create_tour",k)},notify_destroy_tour:function(k){j.lobbyMain.lobby("notify_destroy_tour",k)},notify_join_hydra:function(k){if(k.tour_id){}else{if(k.table_id){i.find("#tring"+k.table_id).table_ring("notify_join_hydra",k)}}},notify_join_table:function(k){k.color=j.lobbyMain.lobby("option","loginData."+k.login_id+".color");if(k.tour_id){}else{if(k.table_id){i.find("#tring"+k.table_id).table_ring("notify_join_table",k)}}},notify_unjoin_table:function(k){if(k.tour_id){}else{if(k.table_id){i.find("#tring"+k.table_id).table_ring("player_unjoin",k)}}},notify_pick_game:function(k){i.find("#tring"+k.table_id).table_ring("notify_pick_game",k)},notify_fold:function(k){i.find("#tring"+k.table_id).table_ring("notify_fold",k)},notify_bet:function(k){i.find("#tring"+k.table_id).table_ring("notify_bet",k)},notify_check:function(k){i.find("#tring"+k.table_id).table_ring("notify_check",k)},notify_discard:function(k){i.find("#tring"+k.table_id).table_ring("notify_discard",k)},notify_draw:function(k){i.find("#tring"+k.table_id).table_ring("notify_draw",k)},notify_user_chips:function(k){},table_chips_res:function(k){i.find("#tring"+k.table_id).table_ring("table_chips_res",k)},join_ring_res:function(k){i.find("#tring"+k.table_id).table_ring("join_ring_res",k)},unjoin_ring_res:function(k){i.find("#tring"+k.table_id).table_ring("unjoin_ring_res",k)},unwatch_table_res:function(k){if(k.tour_id){}else{if(k.table_id){i.find("#tring"+k.table_id).remove()}}},watch_table_res:function(k){if(k.tour_id&&k.success){}else{if(k.table_id&&k.success){f._msgHandler("unwatch_table_res",k);j.lobbyMain.lobby("watch_table_res",k)}}},watch_tour_res:function(k){f._msgHandler("unwatch_tour_res",k);j.lobbyMain.lobby("watch_tour_res",k)},unwatch_tour_res:function(k){i.find("#tour"+k.tour_id).remove()},login_res:function(k){j.login_id=k.login_id;j.lobbyMain.lobby("login_res",k)},login_info_res:function(k){j.lobbyMain.lobby("login_info_res",k)},register_res:function(k){j.lobbyMain.lobby("register_res",k)},table_opts_res:function(k){i.find("#tring"+k.table_id).table_ring("table_opts_res",k)},pick_game_res:function(k){i.find("#tring"+k.table_id).table_ring("pick_game_res",k)},bet_res:function(k){i.find("#tring"+k.table_id).table_ring("bet_res",k)},check_res:function(k){i.find("#tring"+k.table_id).table_ring("check_res",k)},fold_res:function(k){i.find("#tring"+k.table_id).table_ring("fold_res",k)},discard_res:function(k){i.find("#tring"+k.table_id).table_ring("discard_res",k)},draw_res:function(k){i.find("#tring"+k.table_id).table_ring("draw_res",k)},"default":function(k){}};if(h in e){e[h](g)}},_setOption:function(g,i){var f=this,j=f.options,h=f.element;var e={ws:function(){},wsock:function(){},lobbyMain:function(){}};if(g in e){j[g]=i;e[g]()}}})})(jQuery,window,document);